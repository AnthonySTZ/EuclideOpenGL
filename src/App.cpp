#include "App.h"

#include <stdexcept>

void App::run()
{
    EuclideModel::Builder modelBuilder{};
    // Duplicate vertices to have hard normals
    modelBuilder.vertices = {
        // Front face (normal: 0, 0, 1)
        { {-0.5f,  0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 0.0f, 1.0f} },
        { {-0.5f, -0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 0.0f, 1.0f} },
        { { 0.5f,  0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 0.0f, 1.0f} },
        { { 0.5f, -0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 0.0f, 1.0f} },

        // Back face (normal: 0, 0, -1)
        { {-0.5f,  0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 0.0f, -1.0f} },
        { {-0.5f, -0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 0.0f, -1.0f} },
        { { 0.5f,  0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 0.0f, -1.0f} },
        { { 0.5f, -0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 0.0f, -1.0f} },

        // Left face (normal: -1, 0, 0)
        { {-0.5f,  0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {-1.0f, 0.0f, 0.0f} },
        { {-0.5f, -0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {-1.0f, 0.0f, 0.0f} },
        { {-0.5f,  0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {-1.0f, 0.0f, 0.0f} },
        { {-0.5f, -0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {-1.0f, 0.0f, 0.0f} },

        // Right face (normal: 1, 0, 0)
        { { 0.5f,  0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {1.0f, 0.0f, 0.0f} },
        { { 0.5f, -0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {1.0f, 0.0f, 0.0f} },
        { { 0.5f,  0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {1.0f, 0.0f, 0.0f} },
        { { 0.5f, -0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {1.0f, 0.0f, 0.0f} },

        // Top face (normal: 0, 1, 0)
        { {-0.5f,  0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 1.0f, 0.0f} },
        { {-0.5f,  0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 1.0f, 0.0f} },
        { { 0.5f,  0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 1.0f, 0.0f} },
        { { 0.5f,  0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, 1.0f, 0.0f} },

        // Bottom face (normal: 0, -1, 0)
        { {-0.5f, -0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, -1.0f, 0.0f} },
        { {-0.5f, -0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, -1.0f, 0.0f} },
        { { 0.5f, -0.5f, -0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, -1.0f, 0.0f} },
        { { 0.5f, -0.5f,  0.5f}, {0.8f, 0.8f, 0.8f}, {0.0f, -1.0f, 0.0f} },
    };

    modelBuilder.indices = {
        // Front
        0, 1, 2,  2, 1, 3,
        // Back
        4, 5, 6,  6, 5, 7,
        // Left
        8, 9, 10,  10, 9, 11,
        // Right
        12, 13, 14,  14, 13, 15,
        // Top
        16, 17, 18,  18, 17, 19,
        // Bottom
        20, 21, 22,  22, 21, 23
    };

	euclideEngine.initEngine(1600, 1000, "Euclide");
	euclideEngine.updateModel(modelBuilder);
	euclideEngine.exec();

}

